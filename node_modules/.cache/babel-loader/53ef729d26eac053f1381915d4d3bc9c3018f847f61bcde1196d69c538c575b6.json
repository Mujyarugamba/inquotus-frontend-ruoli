{"ast":null,"code":"import React,{useEffect,useState}from'react';import{API_BASE}from'../config/config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RichiesteSospette=()=>{const[segnalazioni,setSegnalazioni]=useState([]);const[messaggio,setMessaggio]=useState('');const[loading,setLoading]=useState(true);const fetchSegnalazioni=async()=>{setLoading(true);try{const res=await fetch(`${API_BASE}/api/admin/segnalazioni`,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});const data=await res.json();if(!res.ok)throw new Error(data.error||'Errore nel caricamento');setSegnalazioni(data);}catch(err){setMessaggio(`‚ùå ${err.message}`);}finally{setLoading(false);}};useEffect(()=>{fetchSegnalazioni();},[]);const archiviaRichiesta=async id=>{if(!window.confirm('Vuoi archiviare questa richiesta?'))return;try{const res=await fetch(`${API_BASE}/api/admin/archivia-richiesta/${id}`,{method:'PATCH',headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!res.ok)throw new Error('Errore durante archiviazione');setMessaggio('‚úÖ Richiesta archiviata');fetchSegnalazioni();}catch(err){setMessaggio(`‚ùå ${err.message}`);}};const rimuoviRichiesta=async id=>{if(!window.confirm('Rimuovere questa richiesta?'))return;try{const res=await fetch(`${API_BASE}/api/admin/rimuovi-richiesta/${id}`,{method:'DELETE',headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!res.ok)throw new Error('Errore durante rimozione');setMessaggio('‚úÖ Richiesta rimossa');fetchSegnalazioni();}catch(err){setMessaggio(`‚ùå ${err.message}`);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDEA8 Richieste sospette / segnalate\"}),messaggio&&/*#__PURE__*/_jsx(\"p\",{style:{color:messaggio.startsWith('‚úÖ')?'green':'red'},children:messaggio}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Caricamento...\"}):segnalazioni.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Nessuna segnalazione trovata.\"}):/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",style:{width:'100%',marginTop:'1rem'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Richiesta\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email committente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Motivo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Azioni\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:segnalazioni.map(s=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.id}),/*#__PURE__*/_jsx(\"td\",{children:s.richiesta_id}),/*#__PURE__*/_jsx(\"td\",{children:s.email_committente}),/*#__PURE__*/_jsx(\"td\",{children:s.motivo}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>archiviaRichiesta(s.richiesta_id),children:\"\\uD83D\\uDDC2\\uFE0F Archivia\"}),' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>rimuoviRichiesta(s.richiesta_id),style:{color:'red'},children:\"\\uD83D\\uDDD1\\uFE0F Rimuovi\"})]})]},s.id))})]})]});};export default RichiesteSospette;","map":{"version":3,"names":["React","useEffect","useState","API_BASE","jsx","_jsx","jsxs","_jsxs","RichiesteSospette","segnalazioni","setSegnalazioni","messaggio","setMessaggio","loading","setLoading","fetchSegnalazioni","res","fetch","headers","Authorization","localStorage","getItem","data","json","ok","Error","error","err","message","archiviaRichiesta","id","window","confirm","method","rimuoviRichiesta","style","padding","children","color","startsWith","length","border","cellPadding","width","marginTop","map","s","richiesta_id","email_committente","motivo","onClick"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/admin/RichiesteSospette.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { API_BASE } from '../config/config';\n\nconst RichiesteSospette = () => {\n  const [segnalazioni, setSegnalazioni] = useState([]);\n  const [messaggio, setMessaggio] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  const fetchSegnalazioni = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/admin/segnalazioni`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Errore nel caricamento');\n      setSegnalazioni(data);\n    } catch (err) {\n      setMessaggio(`‚ùå ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchSegnalazioni();\n  }, []);\n\n  const archiviaRichiesta = async (id) => {\n    if (!window.confirm('Vuoi archiviare questa richiesta?')) return;\n    try {\n      const res = await fetch(`${API_BASE}/api/admin/archivia-richiesta/${id}`, {\n        method: 'PATCH',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (!res.ok) throw new Error('Errore durante archiviazione');\n      setMessaggio('‚úÖ Richiesta archiviata');\n      fetchSegnalazioni();\n    } catch (err) {\n      setMessaggio(`‚ùå ${err.message}`);\n    }\n  };\n\n  const rimuoviRichiesta = async (id) => {\n    if (!window.confirm('Rimuovere questa richiesta?')) return;\n    try {\n      const res = await fetch(`${API_BASE}/api/admin/rimuovi-richiesta/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (!res.ok) throw new Error('Errore durante rimozione');\n      setMessaggio('‚úÖ Richiesta rimossa');\n      fetchSegnalazioni();\n    } catch (err) {\n      setMessaggio(`‚ùå ${err.message}`);\n    }\n  };\n\n  return (\n    <div style={{ padding: '1rem' }}>\n      <h2>üö® Richieste sospette / segnalate</h2>\n\n      {messaggio && (\n        <p style={{ color: messaggio.startsWith('‚úÖ') ? 'green' : 'red' }}>{messaggio}</p>\n      )}\n\n      {loading ? (\n        <p>Caricamento...</p>\n      ) : segnalazioni.length === 0 ? (\n        <p>Nessuna segnalazione trovata.</p>\n      ) : (\n        <table border=\"1\" cellPadding=\"8\" style={{ width: '100%', marginTop: '1rem' }}>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Richiesta</th>\n              <th>Email committente</th>\n              <th>Motivo</th>\n              <th>Azioni</th>\n            </tr>\n          </thead>\n          <tbody>\n            {segnalazioni.map(s => (\n              <tr key={s.id}>\n                <td>{s.id}</td>\n                <td>{s.richiesta_id}</td>\n                <td>{s.email_committente}</td>\n                <td>{s.motivo}</td>\n                <td>\n                  <button onClick={() => archiviaRichiesta(s.richiesta_id)}>üóÇÔ∏è Archivia</button>{' '}\n                  <button onClick={() => rimuoviRichiesta(s.richiesta_id)} style={{ color: 'red' }}>üóëÔ∏è Rimuovi</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default RichiesteSospette;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}