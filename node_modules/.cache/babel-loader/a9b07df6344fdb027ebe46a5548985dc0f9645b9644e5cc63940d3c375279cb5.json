{"ast":null,"code":"import{useEffect}from'react';import{supabase}from'../config/supabaseClient';import{toast}from'react-toastify';const useRealtimeNotifiche=utenteEmail=>{useEffect(()=>{if(!utenteEmail)return;const channel=supabase.channel('notifiche-realtime').on('postgres_changes',{event:'INSERT',schema:'public',table:'notifiche',filter:`email=eq.${utenteEmail}`},payload=>{var _payload$new;const messaggio=((_payload$new=payload.new)===null||_payload$new===void 0?void 0:_payload$new.messaggio)||'ðŸ”” Hai una nuova notifica!';toast.info(messaggio);}).subscribe();return()=>{supabase.removeChannel(channel);};},[utenteEmail]);};export default useRealtimeNotifiche;","map":{"version":3,"names":["useEffect","supabase","toast","useRealtimeNotifiche","utenteEmail","channel","on","event","schema","table","filter","payload","_payload$new","messaggio","new","info","subscribe","removeChannel"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/hooks/useRealtimeNotifiche.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { supabase } from '../config/supabaseClient';\nimport { toast } from 'react-toastify';\n\nconst useRealtimeNotifiche = (utenteEmail) => {\n  useEffect(() => {\n    if (!utenteEmail) return;\n\n    const channel = supabase\n      .channel('notifiche-realtime')\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'notifiche',\n          filter: `email=eq.${utenteEmail}`\n        },\n        (payload) => {\n          const messaggio = payload.new?.messaggio || 'ðŸ”” Hai una nuova notifica!';\n          toast.info(messaggio);\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [utenteEmail]);\n};\n\nexport default useRealtimeNotifiche;\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,QAAQ,KAAQ,0BAA0B,CACnD,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,KAAM,CAAAC,oBAAoB,CAAIC,WAAW,EAAK,CAC5CJ,SAAS,CAAC,IAAM,CACd,GAAI,CAACI,WAAW,CAAE,OAElB,KAAM,CAAAC,OAAO,CAAGJ,QAAQ,CACrBI,OAAO,CAAC,oBAAoB,CAAC,CAC7BC,EAAE,CACD,kBAAkB,CAClB,CACEC,KAAK,CAAE,QAAQ,CACfC,MAAM,CAAE,QAAQ,CAChBC,KAAK,CAAE,WAAW,CAClBC,MAAM,CAAE,YAAYN,WAAW,EACjC,CAAC,CACAO,OAAO,EAAK,KAAAC,YAAA,CACX,KAAM,CAAAC,SAAS,CAAG,EAAAD,YAAA,CAAAD,OAAO,CAACG,GAAG,UAAAF,YAAA,iBAAXA,YAAA,CAAaC,SAAS,GAAI,4BAA4B,CACxEX,KAAK,CAACa,IAAI,CAACF,SAAS,CAAC,CACvB,CACF,CAAC,CACAG,SAAS,CAAC,CAAC,CAEd,MAAO,IAAM,CACXf,QAAQ,CAACgB,aAAa,CAACZ,OAAO,CAAC,CACjC,CAAC,CACH,CAAC,CAAE,CAACD,WAAW,CAAC,CAAC,CACnB,CAAC,CAED,cAAe,CAAAD,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}