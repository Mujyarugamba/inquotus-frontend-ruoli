{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\151702\\\\Desktop\\\\Inquotus\\\\Inquotus-frontend-ruoli\\\\src\\\\admin\\\\AdminNotifiche.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst supabase = createClient(process.env.REACT_APP_SUPABASE_URL, process.env.REACT_APP_SUPABASE_ANON_KEY);\nconst AdminNotifiche = () => {\n  _s();\n  const [notifiche, setNotifiche] = useState([]);\n  const [nonLette, setNonLette] = useState(0);\n  useEffect(() => {\n    const fetchIniziali = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('notifiche').select('*').order('timestamp', {\n        ascending: false\n      }).limit(20);\n      if (!error) {\n        setNotifiche(data);\n        setNonLette(data.filter(n => !n.letto).length);\n      }\n    };\n    fetchIniziali();\n    const channel = supabase.channel('notifiche-admin').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'notifiche'\n    }, payload => {\n      setNotifiche(prev => [payload.new, ...prev]);\n      if (!payload.new.letto) {\n        setNonLette(prev => prev + 1);\n      }\n    }).subscribe();\n    return () => supabase.removeChannel(channel);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDD14 Notifiche in tempo reale (Admin)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Non lette:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 10\n      }, this), \" \", nonLette]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: notifiche.map((n, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          marginBottom: '1rem',\n          borderBottom: '1px solid #ccc'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: n.tipo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), \" da \", /*#__PURE__*/_jsxDEV(\"em\", {\n          children: n.email_utente\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 42\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 67\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: new Date(n.timestamp).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), ' ', !n.letto && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: 'red'\n          },\n          children: \"\\uD83C\\uDD95\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 26\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminNotifiche, \"jzM8kjuzUYPTBQ/Np3Q/m7GFzfA=\");\n_c = AdminNotifiche;\nexport default AdminNotifiche;\nvar _c;\n$RefreshReg$(_c, \"AdminNotifiche\");","map":{"version":3,"names":["React","useEffect","useState","createClient","jsxDEV","_jsxDEV","supabase","process","env","REACT_APP_SUPABASE_URL","REACT_APP_SUPABASE_ANON_KEY","AdminNotifiche","_s","notifiche","setNotifiche","nonLette","setNonLette","fetchIniziali","data","error","from","select","order","ascending","limit","filter","n","letto","length","channel","on","event","schema","table","payload","prev","new","subscribe","removeChannel","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","map","i","marginBottom","borderBottom","tipo","email_utente","Date","timestamp","toLocaleString","color","_c","$RefreshReg$"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/admin/AdminNotifiche.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  process.env.REACT_APP_SUPABASE_URL,\n  process.env.REACT_APP_SUPABASE_ANON_KEY\n);\n\nconst AdminNotifiche = () => {\n  const [notifiche, setNotifiche] = useState([]);\n  const [nonLette, setNonLette] = useState(0);\n\n  useEffect(() => {\n    const fetchIniziali = async () => {\n      const { data, error } = await supabase\n        .from('notifiche')\n        .select('*')\n        .order('timestamp', { ascending: false })\n        .limit(20);\n\n      if (!error) {\n        setNotifiche(data);\n        setNonLette(data.filter(n => !n.letto).length);\n      }\n    };\n\n    fetchIniziali();\n\n    const channel = supabase\n      .channel('notifiche-admin')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'notifiche' }, payload => {\n        setNotifiche(prev => [payload.new, ...prev]);\n        if (!payload.new.letto) {\n          setNonLette(prev => prev + 1);\n        }\n      })\n      .subscribe();\n\n    return () => supabase.removeChannel(channel);\n  }, []);\n\n  return (\n    <div style={{ padding: '1rem' }}>\n      <h2>ðŸ”” Notifiche in tempo reale (Admin)</h2>\n      <p><strong>Non lette:</strong> {nonLette}</p>\n\n      <ul>\n        {notifiche.map((n, i) => (\n          <li key={i} style={{ marginBottom: '1rem', borderBottom: '1px solid #ccc' }}>\n            <strong>{n.tipo}</strong> da <em>{n.email_utente}</em><br />\n            <small>{new Date(n.timestamp).toLocaleString()}</small>{' '}\n            {!n.letto && <span style={{ color: 'red' }}>ðŸ†•</span>}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default AdminNotifiche;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}