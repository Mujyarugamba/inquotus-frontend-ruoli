{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\151702\\\\Desktop\\\\Inquotus\\\\Inquotus-frontend-ruoli\\\\src\\\\richieste\\\\RichiestaModifica.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { API_BASE } from '../config/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RichiestaModifica = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [richiesta, setRichiesta] = useState(null);\n  const [messaggio, setMessaggio] = useState('');\n  const token = localStorage.getItem('token');\n  useEffect(() => {\n    const fetchRichiesta = async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/richiesta/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await res.json();\n        if (res.ok) setRichiesta(data);else setMessaggio(data.error || 'Errore caricamento');\n      } catch (err) {\n        setMessaggio('Errore di rete');\n      }\n    };\n    fetchRichiesta();\n  }, [id, token]);\n  const handleChange = e => {\n    setRichiesta({\n      ...richiesta,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`${API_BASE}/api/richiesta/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(richiesta)\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setMessaggio('✅ Richiesta aggiornata con successo!');\n        setTimeout(() => navigate('/mie-richieste'), 1500);\n      } else {\n        setMessaggio(data.error || 'Errore aggiornamento');\n      }\n    } catch (err) {\n      setMessaggio('Errore di rete');\n    }\n  };\n  if (!richiesta) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u23F3 Caricamento...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      maxWidth: '600px',\n      margin: '2rem auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u270F\\uFE0F Modifica Richiesta\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"categoria\",\n      value: richiesta.categoria,\n      onChange: handleChange,\n      placeholder: \"Categoria\",\n      required: true,\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"regione\",\n      value: richiesta.regione,\n      onChange: handleChange,\n      placeholder: \"Regione\",\n      required: true,\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"provincia\",\n      value: richiesta.provincia,\n      onChange: handleChange,\n      placeholder: \"Provincia\",\n      required: true,\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"localita\",\n      value: richiesta.localita,\n      onChange: handleChange,\n      placeholder: \"Comune\",\n      required: true,\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      name: \"descrizione\",\n      value: richiesta.descrizione,\n      onChange: handleChange,\n      placeholder: \"Descrizione dettagliata\",\n      required: true,\n      rows: 5,\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"contatti\",\n      value: richiesta.contatti || '',\n      onChange: handleChange,\n      placeholder: \"Contatti aggiuntivi\",\n      style: {\n        width: '100%',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        name: \"urgente\",\n        checked: richiesta.urgente,\n        onChange: e => setRichiesta({\n          ...richiesta,\n          urgente: e.target.checked\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), \" Urgente\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Salva modifiche\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), messaggio && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem',\n        color: messaggio.startsWith('✅') ? 'green' : 'red'\n      },\n      children: messaggio\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(RichiestaModifica, \"GQTyMBSFUh94ToI8xd3ZGaSARy4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = RichiestaModifica;\nexport default RichiestaModifica;\nvar _c;\n$RefreshReg$(_c, \"RichiestaModifica\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","API_BASE","jsxDEV","_jsxDEV","RichiestaModifica","_s","id","navigate","richiesta","setRichiesta","messaggio","setMessaggio","token","localStorage","getItem","fetchRichiesta","res","fetch","headers","Authorization","data","json","ok","error","err","handleChange","e","target","name","value","handleSubmit","preventDefault","method","body","JSON","stringify","setTimeout","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","style","maxWidth","margin","categoria","onChange","placeholder","required","width","marginBottom","regione","provincia","localita","descrizione","rows","contatti","type","checked","urgente","marginTop","color","startsWith","_c","$RefreshReg$"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/richieste/RichiestaModifica.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { API_BASE } from '../config/config';\n\nconst RichiestaModifica = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [richiesta, setRichiesta] = useState(null);\n  const [messaggio, setMessaggio] = useState('');\n  const token = localStorage.getItem('token');\n\n  useEffect(() => {\n    const fetchRichiesta = async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/richiesta/${id}`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        const data = await res.json();\n        if (res.ok) setRichiesta(data);\n        else setMessaggio(data.error || 'Errore caricamento');\n      } catch (err) {\n        setMessaggio('Errore di rete');\n      }\n    };\n\n    fetchRichiesta();\n  }, [id, token]);\n\n  const handleChange = (e) => {\n    setRichiesta({ ...richiesta, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`${API_BASE}/api/richiesta/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(richiesta)\n      });\n\n      const data = await res.json();\n      if (res.ok) {\n        setMessaggio('✅ Richiesta aggiornata con successo!');\n        setTimeout(() => navigate('/mie-richieste'), 1500);\n      } else {\n        setMessaggio(data.error || 'Errore aggiornamento');\n      }\n    } catch (err) {\n      setMessaggio('Errore di rete');\n    }\n  };\n\n  if (!richiesta) return <p>⏳ Caricamento...</p>;\n\n  return (\n    <form onSubmit={handleSubmit} style={{ maxWidth: '600px', margin: '2rem auto' }}>\n      <h2>✏️ Modifica Richiesta</h2>\n\n      <input\n        name=\"categoria\"\n        value={richiesta.categoria}\n        onChange={handleChange}\n        placeholder=\"Categoria\"\n        required\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <input\n        name=\"regione\"\n        value={richiesta.regione}\n        onChange={handleChange}\n        placeholder=\"Regione\"\n        required\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <input\n        name=\"provincia\"\n        value={richiesta.provincia}\n        onChange={handleChange}\n        placeholder=\"Provincia\"\n        required\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <input\n        name=\"localita\"\n        value={richiesta.localita}\n        onChange={handleChange}\n        placeholder=\"Comune\"\n        required\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <textarea\n        name=\"descrizione\"\n        value={richiesta.descrizione}\n        onChange={handleChange}\n        placeholder=\"Descrizione dettagliata\"\n        required\n        rows={5}\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <input\n        name=\"contatti\"\n        value={richiesta.contatti || ''}\n        onChange={handleChange}\n        placeholder=\"Contatti aggiuntivi\"\n        style={{ width: '100%', marginBottom: '1rem' }}\n      />\n\n      <label>\n        <input\n          type=\"checkbox\"\n          name=\"urgente\"\n          checked={richiesta.urgente}\n          onChange={(e) => setRichiesta({ ...richiesta, urgente: e.target.checked })}\n        /> Urgente\n      </label>\n\n      <br /><br />\n      <button type=\"submit\">Salva modifiche</button>\n\n      {messaggio && <p style={{ marginTop: '1rem', color: messaggio.startsWith('✅') ? 'green' : 'red' }}>{messaggio}</p>}\n    </form>\n  );\n};\n\nexport default RichiestaModifica;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}