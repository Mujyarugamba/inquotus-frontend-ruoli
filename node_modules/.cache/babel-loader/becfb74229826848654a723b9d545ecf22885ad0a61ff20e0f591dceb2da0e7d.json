{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Committente(_ref){let{utente}=_ref;const[richieste,setRichieste]=useState([]);const[errore,setErrore]=useState('');useEffect(()=>{const token=localStorage.getItem('token');if(!token){setErrore('Token mancante');return;}fetch('http://localhost:5000/api/mie-richieste',{headers:{Authorization:`Bearer ${token}`}}).then(res=>res.json()).then(data=>{console.log('RISPOSTA DAL SERVER ‚Üí /mie-richieste:',data);// üëà LOG IMPORTANTE\nif(Array.isArray(data)){setRichieste(data);}else{setErrore(data.error||'Errore inatteso dal server');}}).catch(err=>{console.error('Errore connessione:',err);setErrore('Errore di connessione al server');});},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1rem'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Ciao \",utente===null||utente===void 0?void 0:utente.nome,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Benvenuto nella tua area personale. Qui puoi:\"}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/richiesta\",children:\"Inserire una nuova richiesta di lavoro in quota\"})})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Le tue richieste\"}),errore&&/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\"\\u26A0\\uFE0F \",errore]}),richieste.length===0&&!errore?/*#__PURE__*/_jsx(\"p\",{children:\"Non hai ancora inserito richieste.\"}):/*#__PURE__*/_jsx(\"ul\",{children:richieste.map(r=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Categoria:\"}),\" \",r.categoria,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Comune:\"}),\" \",r.localita,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Data:\"}),\" \",new Date(r.data).toLocaleDateString()]},r.id))})]});}export default Committente;","map":{"version":3,"names":["React","useEffect","useState","Link","jsxs","_jsxs","jsx","_jsx","Committente","_ref","utente","richieste","setRichieste","errore","setErrore","token","localStorage","getItem","fetch","headers","Authorization","then","res","json","data","console","log","Array","isArray","error","catch","err","style","padding","children","nome","to","color","length","map","r","marginBottom","categoria","localita","Date","toLocaleDateString","id"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/pages/Committente.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Committente({ utente }) {\n  const [richieste, setRichieste] = useState([]);\n  const [errore, setErrore] = useState('');\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setErrore('Token mancante');\n      return;\n    }\n\n    fetch('http://localhost:5000/api/mie-richieste', {\n      headers: { Authorization: `Bearer ${token}` }\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log('RISPOSTA DAL SERVER ‚Üí /mie-richieste:', data); // üëà LOG IMPORTANTE\n\n        if (Array.isArray(data)) {\n          setRichieste(data);\n        } else {\n          setErrore(data.error || 'Errore inatteso dal server');\n        }\n      })\n      .catch(err => {\n        console.error('Errore connessione:', err);\n        setErrore('Errore di connessione al server');\n      });\n  }, []);\n\n  return (\n    <div style={{ padding: '1rem' }}>\n      <h2>Ciao {utente?.nome}!</h2>\n      <p>Benvenuto nella tua area personale. Qui puoi:</p>\n      <ul>\n        <li><Link to=\"/richiesta\">Inserire una nuova richiesta di lavoro in quota</Link></li>\n      </ul>\n\n      <h3>Le tue richieste</h3>\n\n      {errore && <p style={{ color: 'red' }}>‚ö†Ô∏è {errore}</p>}\n\n      {richieste.length === 0 && !errore ? (\n        <p>Non hai ancora inserito richieste.</p>\n      ) : (\n        <ul>\n          {richieste.map(r => (\n            <li key={r.id} style={{ marginBottom: '1rem' }}>\n              <strong>Categoria:</strong> {r.categoria} <br />\n              <strong>Comune:</strong> {r.localita} <br />\n              <strong>Data:</strong> {new Date(r.data).toLocaleDateString()}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default Committente;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}