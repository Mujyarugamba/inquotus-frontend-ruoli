{"ast":null,"code":"import React,{useState}from'react';import CategoriaForm from'./CategoriaForm';import LocalitaForm from'./LocalitaForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RichiestaForm=_ref=>{let{utente}=_ref;const[formData,setFormData]=useState({categoria:'',regione:'',comune:'',via:'',civico:'',descrizione:'',media_url:''});const[message,setMessage]=useState('');const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();const{categoria,regione,comune,via,civico,descrizione,media_url}=formData;const localita=`${regione}, ${comune}${via?', '+via:''}${civico?' '+civico:''}`;try{const res=await fetch('http://localhost:5000/api/richiesta',{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({user_id:utente.id,categoria,localita,descrizione,media_url})});const data=await res.json();setMessage(res.ok?'✅ Richiesta inviata con successo!':data.error||'Errore invio richiesta');}catch(err){setMessage('Errore di connessione al server');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{maxWidth:'600px',margin:'2rem auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nuova richiesta\"}),/*#__PURE__*/_jsx(CategoriaForm,{onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(LocalitaForm,{onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Descrizione:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"descrizione\",value:formData.descrizione,onChange:handleChange,placeholder:\"Descrizione dettagliata\",required:true,style:{width:'100%',height:'100px'}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Link immagine:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"media_url\",value:formData.media_url,onChange:handleChange,placeholder:\"https://...\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Invia richiesta\"}),/*#__PURE__*/_jsx(\"p\",{children:message})]});};export default RichiestaForm;","map":{"version":3,"names":["React","useState","CategoriaForm","LocalitaForm","jsx","_jsx","jsxs","_jsxs","RichiestaForm","_ref","utente","formData","setFormData","categoria","regione","comune","via","civico","descrizione","media_url","message","setMessage","handleChange","e","target","name","value","handleSubmit","preventDefault","localita","res","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","user_id","id","data","json","ok","error","err","onSubmit","style","maxWidth","margin","children","onChange","placeholder","required","width","height","type"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/RichiestaForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport CategoriaForm from './CategoriaForm';\nimport LocalitaForm from './LocalitaForm';\n\nconst RichiestaForm = ({ utente }) => {\n  const [formData, setFormData] = useState({\n    categoria: '',\n    regione: '',\n    comune: '',\n    via: '',\n    civico: '',\n    descrizione: '',\n    media_url: ''\n  });\n  const [message, setMessage] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { categoria, regione, comune, via, civico, descrizione, media_url } = formData;\n    const localita = `${regione}, ${comune}${via ? ', ' + via : ''}${civico ? ' ' + civico : ''}`;\n\n    try {\n      const res = await fetch('http://localhost:5000/api/richiesta', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          user_id: utente.id,\n          categoria,\n          localita,\n          descrizione,\n          media_url\n        })\n      });\n\n      const data = await res.json();\n      setMessage(res.ok ? '✅ Richiesta inviata con successo!' : data.error || 'Errore invio richiesta');\n    } catch (err) {\n      setMessage('Errore di connessione al server');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ maxWidth: '600px', margin: '2rem auto' }}>\n      <h2>Nuova richiesta</h2>\n\n      <CategoriaForm onChange={handleChange} /><br />\n      <LocalitaForm onChange={handleChange} /><br />\n\n      <label>Descrizione:</label><br />\n      <textarea\n        name=\"descrizione\"\n        value={formData.descrizione}\n        onChange={handleChange}\n        placeholder=\"Descrizione dettagliata\"\n        required\n        style={{ width: '100%', height: '100px' }}\n      /><br /><br />\n\n      <label>Link immagine:</label><br />\n      <input\n        type=\"text\"\n        name=\"media_url\"\n        value={formData.media_url}\n        onChange={handleChange}\n        placeholder=\"https://...\"\n      /><br /><br />\n\n      <button type=\"submit\">Invia richiesta</button>\n      <p>{message}</p>\n    </form>\n  );\n};\n\nexport default RichiestaForm;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}