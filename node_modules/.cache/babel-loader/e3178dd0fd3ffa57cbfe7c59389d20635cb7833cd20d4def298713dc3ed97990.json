{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { supabase } from '../config/supabaseClient';\nimport { toast } from 'react-toastify';\nconst useRealtimeNotifiche = utenteEmail => {\n  _s();\n  useEffect(() => {\n    if (!utenteEmail) return;\n    const channel = supabase.channel('notifiche-realtime').on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'notifiche',\n      filter: `email=eq.${utenteEmail}`\n    }, payload => {\n      var _payload$new;\n      const messaggio = ((_payload$new = payload.new) === null || _payload$new === void 0 ? void 0 : _payload$new.messaggio) || 'ðŸ”” Hai una nuova notifica!';\n      toast.info(messaggio);\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [utenteEmail]);\n};\n_s(useRealtimeNotifiche, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default useRealtimeNotifiche;","map":{"version":3,"names":["useEffect","supabase","toast","useRealtimeNotifiche","utenteEmail","_s","channel","on","event","schema","table","filter","payload","_payload$new","messaggio","new","info","subscribe","removeChannel"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/hooks/useRealtimeNotifiche.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { supabase } from '../config/supabaseClient';\nimport { toast } from 'react-toastify';\n\nconst useRealtimeNotifiche = (utenteEmail) => {\n  useEffect(() => {\n    if (!utenteEmail) return;\n\n    const channel = supabase\n      .channel('notifiche-realtime')\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'notifiche',\n          filter: `email=eq.${utenteEmail}`\n        },\n        (payload) => {\n          const messaggio = payload.new?.messaggio || 'ðŸ”” Hai una nuova notifica!';\n          toast.info(messaggio);\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [utenteEmail]);\n};\n\nexport default useRealtimeNotifiche;\n\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,0BAA0B;AACnD,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,oBAAoB,GAAIC,WAAW,IAAK;EAAAC,EAAA;EAC5CL,SAAS,CAAC,MAAM;IACd,IAAI,CAACI,WAAW,EAAE;IAElB,MAAME,OAAO,GAAGL,QAAQ,CACrBK,OAAO,CAAC,oBAAoB,CAAC,CAC7BC,EAAE,CACD,kBAAkB,EAClB;MACEC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE,QAAQ;MAChBC,KAAK,EAAE,WAAW;MAClBC,MAAM,EAAE,YAAYP,WAAW;IACjC,CAAC,EACAQ,OAAO,IAAK;MAAA,IAAAC,YAAA;MACX,MAAMC,SAAS,GAAG,EAAAD,YAAA,GAAAD,OAAO,CAACG,GAAG,cAAAF,YAAA,uBAAXA,YAAA,CAAaC,SAAS,KAAI,4BAA4B;MACxEZ,KAAK,CAACc,IAAI,CAACF,SAAS,CAAC;IACvB,CACF,CAAC,CACAG,SAAS,CAAC,CAAC;IAEd,OAAO,MAAM;MACXhB,QAAQ,CAACiB,aAAa,CAACZ,OAAO,CAAC;IACjC,CAAC;EACH,CAAC,EAAE,CAACF,WAAW,CAAC,CAAC;AACnB,CAAC;AAACC,EAAA,CAzBIF,oBAAoB;AA2B1B,eAAeA,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}