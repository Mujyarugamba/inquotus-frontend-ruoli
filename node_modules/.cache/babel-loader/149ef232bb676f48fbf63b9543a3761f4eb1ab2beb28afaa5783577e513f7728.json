{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\151702\\\\Desktop\\\\Inquotus\\\\Inquotus-frontend-ruoli\\\\src\\\\admin\\\\AdminDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst supabase = createClient(process.env.REACT_APP_SUPABASE_URL, process.env.REACT_APP_SUPABASE_ANON_KEY);\nconst AdminDashboard = () => {\n  _s();\n  const [stats, setStats] = useState({\n    richieste: 0,\n    utenti: 0,\n    entrate: 0\n  });\n  const [grafico, setGrafico] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchStats = async () => {\n      const [{\n        count: countRichieste\n      }, {\n        count: countUtenti\n      }] = await Promise.all([supabase.from('richieste').select('*', {\n        count: 'exact',\n        head: true\n      }), supabase.from('utenti').select('*', {\n        count: 'exact',\n        head: true\n      })]);\n\n      // Dummy entrate Stripe (valore statico)\n      const entrateStripe = 1260.50;\n      setStats({\n        richieste: countRichieste || 0,\n        utenti: countUtenti || 0,\n        entrate: entrateStripe\n      });\n    };\n    const fetchGrafico = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('analytics_richieste').select('data_evento').order('data_evento', {\n        ascending: true\n      });\n      if (!error && data) {\n        const aggregati = {};\n        data.forEach(entry => {\n          const giorno = new Date(entry.data_evento).toISOString().split('T')[0];\n          if (!aggregati[giorno]) aggregati[giorno] = 0;\n          aggregati[giorno]++;\n        });\n        const dati = Object.entries(aggregati).map(([data_evento, conteggio]) => ({\n          data_evento,\n          conteggio\n        }));\n        setGrafico(dati);\n      }\n      setLoading(false);\n    };\n    fetchStats();\n    fetchGrafico();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '2rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDEE0\\uFE0F AreaLavoro Amministratore\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Totale richieste:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 12\n        }, this), \" \", stats.richieste]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Totale utenti:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 12\n        }, this), \" \", stats.utenti]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Entrate Stripe (dummy):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 12\n        }, this), \" \\u20AC\", stats.entrate.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uD83D\\uDCC8 Grafico richieste per giorno\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Caricamento grafico...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      width: \"100%\",\n      height: 300,\n      children: /*#__PURE__*/_jsxDEV(BarChart, {\n        data: grafico,\n        children: [/*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"data_evento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"conteggio\",\n          fill: \"#8884d8\",\n          name: \"Richieste\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"Vxzvc90BggroFzAfOm+sw1cfIjk=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","createClient","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","jsxDEV","_jsxDEV","supabase","process","env","REACT_APP_SUPABASE_URL","REACT_APP_SUPABASE_ANON_KEY","AdminDashboard","_s","stats","setStats","richieste","utenti","entrate","grafico","setGrafico","loading","setLoading","fetchStats","count","countRichieste","countUtenti","Promise","all","from","select","head","entrateStripe","fetchGrafico","data","error","order","ascending","aggregati","forEach","entry","giorno","Date","data_evento","toISOString","split","dati","Object","entries","map","conteggio","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","toFixed","width","height","dataKey","fill","name","_c","$RefreshReg$"],"sources":["C:/Users/151702/Desktop/Inquotus/Inquotus-frontend-ruoli/src/admin/AdminDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\nconst supabase = createClient(\n  process.env.REACT_APP_SUPABASE_URL,\n  process.env.REACT_APP_SUPABASE_ANON_KEY\n);\n\nconst AdminDashboard = () => {\n  const [stats, setStats] = useState({ richieste: 0, utenti: 0, entrate: 0 });\n  const [grafico, setGrafico] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      const [{ count: countRichieste }, { count: countUtenti }] = await Promise.all([\n        supabase.from('richieste').select('*', { count: 'exact', head: true }),\n        supabase.from('utenti').select('*', { count: 'exact', head: true })\n      ]);\n\n      // Dummy entrate Stripe (valore statico)\n      const entrateStripe = 1260.50;\n\n      setStats({\n        richieste: countRichieste || 0,\n        utenti: countUtenti || 0,\n        entrate: entrateStripe\n      });\n    };\n\n    const fetchGrafico = async () => {\n      const { data, error } = await supabase\n        .from('analytics_richieste')\n        .select('data_evento')\n        .order('data_evento', { ascending: true });\n\n      if (!error && data) {\n        const aggregati = {};\n        data.forEach(entry => {\n          const giorno = new Date(entry.data_evento).toISOString().split('T')[0];\n          if (!aggregati[giorno]) aggregati[giorno] = 0;\n          aggregati[giorno]++;\n        });\n        const dati = Object.entries(aggregati).map(([data_evento, conteggio]) => ({ data_evento, conteggio }));\n        setGrafico(dati);\n      }\n      setLoading(false);\n    };\n\n    fetchStats();\n    fetchGrafico();\n  }, []);\n\n  return (\n    <div style={{ padding: '2rem' }}>\n      <h2>üõ†Ô∏è AreaLavoro Amministratore</h2>\n\n      <div style={{ marginBottom: '2rem' }}>\n        <p><strong>Totale richieste:</strong> {stats.richieste}</p>\n        <p><strong>Totale utenti:</strong> {stats.utenti}</p>\n        <p><strong>Entrate Stripe (dummy):</strong> ‚Ç¨{stats.entrate.toFixed(2)}</p>\n      </div>\n\n      <h3>üìà Grafico richieste per giorno</h3>\n      {loading ? (\n        <p>Caricamento grafico...</p>\n      ) : (\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={grafico}>\n            <XAxis dataKey=\"data_evento\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"conteggio\" fill=\"#8884d8\" name=\"Richieste\" />\n          </BarChart>\n        </ResponsiveContainer>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}